import fs from "fs";
import path from "path";
import { fileURLToPath } from "url";
import Configuration from "velocious/build/src/configuration.js";
import EnvironmentHandlerNode from "velocious/build/src/environment-handlers/node.js";
import SqliteDriver from "velocious/build/src/database/drivers/sqlite/index.js";
import AsyncTrackedPool from "velocious/build/src/database/pool/async-tracked-multi-connection.js";
const rootDir = fileURLToPath(new URL("../..", import.meta.url));
const dbDir = path.join(rootDir, "db");
fs.mkdirSync(dbDir, { recursive: true });
const databaseConfig = {
    driver: SqliteDriver,
    name: "tabloom-test",
    poolType: AsyncTrackedPool,
    type: "sqlite"
};
const configuration = new Configuration({
    database: {
        development: {
            default: databaseConfig
        },
        test: {
            default: databaseConfig
        }
    },
    directory: rootDir,
    environmentHandler: new EnvironmentHandlerNode()
});
export default configuration;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdGlvbi5ub2RlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbmZpZy9jb25maWd1cmF0aW9uLm5vZGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFBO0FBQ25CLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQTtBQUN2QixPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sS0FBSyxDQUFBO0FBQ2pDLE9BQU8sYUFBYSxNQUFNLHNDQUFzQyxDQUFBO0FBQ2hFLE9BQU8sc0JBQXNCLE1BQU0sa0RBQWtELENBQUE7QUFDckYsT0FBTyxZQUFZLE1BQU0sc0RBQXNELENBQUE7QUFDL0UsT0FBTyxnQkFBZ0IsTUFBTSxxRUFBcUUsQ0FBQTtBQUVsRyxNQUFNLE9BQU8sR0FBRyxhQUFhLENBQUMsSUFBSSxHQUFHLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtBQUNoRSxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUV0QyxFQUFFLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxFQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFBO0FBRXRDLE1BQU0sY0FBYyxHQUFHO0lBQ3JCLE1BQU0sRUFBRSxZQUFZO0lBQ3BCLElBQUksRUFBRSxjQUFjO0lBQ3BCLFFBQVEsRUFBRSxnQkFBZ0I7SUFDMUIsSUFBSSxFQUFFLFFBQVE7Q0FDZixDQUFBO0FBRUQsTUFBTSxhQUFhLEdBQUcsSUFBSSxhQUFhLENBQUM7SUFDdEMsUUFBUSxFQUFFO1FBQ1IsV0FBVyxFQUFFO1lBQ1gsT0FBTyxFQUFFLGNBQWM7U0FDeEI7UUFDRCxJQUFJLEVBQUU7WUFDSixPQUFPLEVBQUUsY0FBYztTQUN4QjtLQUNGO0lBQ0QsU0FBUyxFQUFFLE9BQU87SUFDbEIsa0JBQWtCLEVBQUUsSUFBSSxzQkFBc0IsRUFBRTtDQUNqRCxDQUFDLENBQUE7QUFFRixlQUFlLGFBQWEsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tIFwiZnNcIlxuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIlxuaW1wb3J0IHtmaWxlVVJMVG9QYXRofSBmcm9tIFwidXJsXCJcbmltcG9ydCBDb25maWd1cmF0aW9uIGZyb20gXCJ2ZWxvY2lvdXMvYnVpbGQvc3JjL2NvbmZpZ3VyYXRpb24uanNcIlxuaW1wb3J0IEVudmlyb25tZW50SGFuZGxlck5vZGUgZnJvbSBcInZlbG9jaW91cy9idWlsZC9zcmMvZW52aXJvbm1lbnQtaGFuZGxlcnMvbm9kZS5qc1wiXG5pbXBvcnQgU3FsaXRlRHJpdmVyIGZyb20gXCJ2ZWxvY2lvdXMvYnVpbGQvc3JjL2RhdGFiYXNlL2RyaXZlcnMvc3FsaXRlL2luZGV4LmpzXCJcbmltcG9ydCBBc3luY1RyYWNrZWRQb29sIGZyb20gXCJ2ZWxvY2lvdXMvYnVpbGQvc3JjL2RhdGFiYXNlL3Bvb2wvYXN5bmMtdHJhY2tlZC1tdWx0aS1jb25uZWN0aW9uLmpzXCJcblxuY29uc3Qgcm9vdERpciA9IGZpbGVVUkxUb1BhdGgobmV3IFVSTChcIi4uLy4uXCIsIGltcG9ydC5tZXRhLnVybCkpXG5jb25zdCBkYkRpciA9IHBhdGguam9pbihyb290RGlyLCBcImRiXCIpXG5cbmZzLm1rZGlyU3luYyhkYkRpciwge3JlY3Vyc2l2ZTogdHJ1ZX0pXG5cbmNvbnN0IGRhdGFiYXNlQ29uZmlnID0ge1xuICBkcml2ZXI6IFNxbGl0ZURyaXZlcixcbiAgbmFtZTogXCJ0YWJsb29tLXRlc3RcIixcbiAgcG9vbFR5cGU6IEFzeW5jVHJhY2tlZFBvb2wsXG4gIHR5cGU6IFwic3FsaXRlXCJcbn1cblxuY29uc3QgY29uZmlndXJhdGlvbiA9IG5ldyBDb25maWd1cmF0aW9uKHtcbiAgZGF0YWJhc2U6IHtcbiAgICBkZXZlbG9wbWVudDoge1xuICAgICAgZGVmYXVsdDogZGF0YWJhc2VDb25maWdcbiAgICB9LFxuICAgIHRlc3Q6IHtcbiAgICAgIGRlZmF1bHQ6IGRhdGFiYXNlQ29uZmlnXG4gICAgfVxuICB9LFxuICBkaXJlY3Rvcnk6IHJvb3REaXIsXG4gIGVudmlyb25tZW50SGFuZGxlcjogbmV3IEVudmlyb25tZW50SGFuZGxlck5vZGUoKVxufSlcblxuZXhwb3J0IGRlZmF1bHQgY29uZmlndXJhdGlvblxuIl19